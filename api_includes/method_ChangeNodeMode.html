















<HTML>
    <HEAD>
    <STYLE type="text/css">
      html {
        margin: 0px;
        padding: 0px;
      }

      body {
        background-color:#ffffff;
        color:#353833;
        font-family:Arial, Helvetica, sans-serif;
        font-size:14px;
      }

      h1, h2, h3, h4 {
        font-family:'open sans', Arial, Helvetica, sans-serif;
      }

      h1 {
        font-size:2.5em;
        font-weight: 300;
      }

      h2 {
        font-size:2em;
        font-weight: 300;
      }

      h3 {
        font-size:1.5em;
        font-weight: 300;
      }
      h4 {
        font-weight: bold;
      }
      p {
        padding: 0;
        border: 0;
        margin: 0;
        padding-bottom: 1ex;
      }
      table {
        border-collapse: collapse;
        border: 1px solid #cccccc;
      }

      table td {
          border: 1px solid #cccccc;
          padding: 7px 5px 7px 5px;
          vertical-align: top;
          font-family:Arial, Helvetica, sans-serif;
          font-size:12px;
      }

      table th {
        color:#FFFFFF;
        background:#4a7db1;
        border: 1px solid #cccccc;
        padding: 5px;
        vertical-align: top;
        text-align: left;
        font-weight:bold;
      }


      span.schema_toggle, span.inline_table_toggle {
        border:1px solid #999999;
        margin-left:5px;
        color:#666666;
        cursor:pointer;
        padding:0px 2px;
      }
      span.expanded_schema {
        border:1px solid #CCCCCC;
        margin:4px 0px 0px 75px;
        display: block;
      }
      span.doc_category {
        margin-top: 20px;
        margin-bottom: 20px;
        font-size: 12px;
        display:block;
      }
      span.example_request {
        display:block;
        margin:1ex 2ex 2ex 1ex;
        font-family: monospace;
        white-space: pre;
      }
      span.example_response {
        display:block;
        margin:1ex 2ex 2ex 1ex;
        font-family: monospace;
        white-space: pre;
      }
      span.rbac_feature {
        display:block;
        margin:1ex 2ex 2ex 1ex;
      }
      span.required_permissions {
        display:block;
        margin:1ex 2ex 2ex 1ex;
      }
      span.help_detail {
        display:block;
        margin:5ex 5ex 5ex 5ex;
        background:#F8F8F8;
      }
      ul {
        margin-top: 5px;
        margin-bottom: 20px;
      }
      ol {
        counter-reset: section;                /* Creates a new instance of the section counter with each ol element */
        list-style-type: none;                 /* Nested couter creates outlined list in API table of contents */
      }
      ol li::before {
        counter-increment: section;            /* Increments only this instance of the section counter */
        content: counters(section,".") " ";    /* Adds the value of all instances of the section counter separated by a ".". */
      }
      .subsection_title {
        text-decoration: underline;
      }
      .subsection {
        margin: 5px 0px 0px 3em;
        width: 90%;
        background-color: #e8e8e8;
      }
      .subsection_text {
        padding: 3px;
        width: 100%;
        background-color: #f8f8f8;
      }
      .inline_table_div {
        clear: both;
        padding: 5px 0px;
        width: 100%;
        background-color: #ffffff;
      }
      .inline_table {
        margin-bottom: 0px
      }
      .error_table {
        margin: 7px 0 7px 5em;
        width: 90%;
      }
      tr.header {
        background-color: #cccccc;
      }
      .row {
        clear: both;
        width: 100%;
      }
      .label {
        padding: 3px;
        float: left;
        width: 25%;
      }
      .value {
        padding: 3px;
        float: right;
        width: 72%;
        background-color: #f8f8f8;
      }
      .api_object_title {
        font-weight: bold;
      }
      .experimental {
        padding-left: 5px;
        font-weight: normal;
        font-size: 12px;
        color: red;
      }
      .deprecated {
        padding-left: 5px;
        font-weight: normal;
        font-size: 12px;
        color: red;
      }
      .removed {
        padding-left: 5px;
        font-weight: normal;
        font-size: 12px;
        color: red;
      }
      .code {
        font-weight: normal;
        font-size: 12px;
        font-family: Lucida-Console, Monaco, monospace;
      }
      .code_block {
        font-weight: normal;
        font-size: 12px;
        font-family: Lucida-Console, Monaco, monospace;
        padding: 5px;
        padding-left: 15px;
      }
    </STYLE>
    <script type="text/javascript">
      function toggleSchemaExpansion(oToggleSpan) {
          var oExpandedPre    = oToggleSpan.nextSibling;

          var bHide = oToggleSpan.innerHTML == "+" ? false : true;

          oToggleSpan.innerHTML      = bHide ? "+"    : "-";
          oExpandedPre.style.display = bHide ? "none" : "";
      }
      function toggleInlineTable(oToggleSpan, sRootDivId, sTableId) {
          var oTableDiv;
          if (sTableId) {
              var oRootDiv = document;
              if (typeof sRootDivId != "undefined" && sRootDivId != "") {
                  oRootDiv = document.getElementById(sRootDivId);
              }
              var aTableDivs = oRootDiv.getElementsByTagName("div");
              for (var i = 0; i < aTableDivs.length; i++) {
                  if (aTableDivs[i].id == sTableId) {
                      oTableDiv = aTableDivs[i];
                      break;
                  }
              }
          }

          if (oTableDiv) {
              var bHide = oToggleSpan.innerHTML == "+" ? false : true;
              oToggleSpan.innerHTML      = bHide ? "+"    : "-";
              oTableDiv.style.display = bHide ? "none" : "inline-block";
          }
      }
      function toggleAllInlineTablesInner(oLink, bHide) {
          var aTableDivs = document.getElementsByTagName("div");
          for (var i = 0; i < aTableDivs.length; i++) {
              var oTableDiv = aTableDivs[i];
              if (oTableDiv.className == "inline_table_div") {
                  oTableDiv.style.display = bHide ? "none" : "inline-block";
              }
          }

          var aSpans = document.getElementsByTagName("span");
          for (var i = 0; i < aSpans.length; i++) {
              var oSpan = aSpans[i];
              if (oSpan.className == "inline_table_toggle") {
                  oSpan.innerHTML = bHide ? "+" : "-";
              }
              if (oSpan.className == "expanded_schema") {
                  toggleSchemaExpansion(oSpan.previousSibling);
              }
          }
          oLink.innerHTML = bHide ? "+" : "-";
      }
      function toggleAllInlineTables(oLink) {
          var bHide = oLink.innerHTML.indexOf("-") > -1;
          oLink.innerHTML = bHide ? "collapsing..." : "expanding...";
          setTimeout(toggleAllInlineTablesInner, 0, oLink, bHide);
      }
    </script>
    </HEAD>
    <BODY>
    
        
        <P>
        
            
                System Administration >
            
            
                <a href='system_administration_configuration.html' style='text-decoration: none'> Configuration</a> >
            
            
                <a href='system_administration_configuration_nsx_managers.html' style='text-decoration: none'> NSX Managers</a> >
            
            
                <a href='system_administration_configuration_nsx_managers_manager_mode.html' style='text-decoration: none'> Manager Mode</a>
            
        </P>
    
        <div id="ChangeNodeMode">
          <h2>
            NodeMode
          </h2>
          <span class="help_detail">Currently only a switch from "VMC_LOCAL" to "VMC" is supported.
<br>
Returns a new Node Mode, if the request successfuly changed it.
<br>
Optionally provisions public oauth2 client info.
<br>
</span>
              <span class="help_detail"></span>
          <h3>Request:</h3>
          <div class="subsection">
            <div class="row">
              <div class="label">Method:</div>
              <div class="value">POST</div>
            </div>
            <div class="row">
              <div class="label">URI Path(s):</div>
              
              <div class="value">
                  
                  /api/v1/configs/node/mode
                  <br>
              </div>
            </div>
            <div class="row">
              <div class="label">Request Headers:</div>
                <div class="value"><i>n/a</i></div>
            </div>
            
            
  
  <div class="row">
    <div class="label">Query Parameters:</div>
    <div class="value"><i>n/a</i></div>
  </div>

              
  
  <div class="row">
    <div class="label">Request Body:</div>
    <div class="value">SwitchingToVmcModeParameters<span class="inline_table_toggle" onclick="toggleInlineTable(this, 'ChangeNodeMode', 'SwitchingToVmcModeParameters.ChangeNodeMode.Request_Body')">+</span></div>
  </div>
    <div id="SwitchingToVmcModeParameters.ChangeNodeMode.Request_Body" style="display:none" class="inline_table_div">
      <h4>
      <a href="types_SwitchingToVmcModeParameters.html">
        <span>SwitchingToVmcModeParameters</span>
      </a> (<a href="schemas_SwitchingToVmcModeParameters.html">schema</a>)
      </h4>
      
    
    <table border="1">
      <tbody>
        <tr class="header">
          <th>Name</th>
          <th width="60%">Description</th>
          <th>Type</th>
          <th>Notes</th>
        </tr>
          <tr>
            <td>auth_code</td>
            
            <td>Auth Code<br><br>Client's credentials.</td>
            
            <td><a href="types_Oauth2Credentials.html">Oauth2Credentials</a></td>
            
            <td></td>
          </tr>
          <tr>
            <td>base_url</td>
            
            <td>CSP base URL<br><br>Protocol and domain name (or IP address) of a CSP server, like "https://console-stg.cloud.vmware.com".</td>
            
            <td>string</td>
            
            <td></td>
          </tr>
          <tr>
            <td>basic_auth_whitelist_ips</td>
            
            <td>Whitelist IPs<br><br>List of whitelist IPs for basic auth</td>
            
            <td>array of string</td>
            
            <td></td>
          </tr>
          <tr>
            <td>csp_access_token_uri</td>
            
            <td>CSP endpoint that exchanges a grant for an access token<br><br>This CSP end-point exchanges one of the following grants - authorization_code, refresh_token, client_credentials or client_delegate for an access token.</td>
            
            <td>string</td>
            
            <td></td>
          </tr>
          <tr>
            <td>csp_client_credential</td>
            
            <td>CSP Client Credential<br><br>Client's credentials on CSP server</td>
            
            <td><a href="types_Oauth2Credentials.html">Oauth2Credentials</a></td>
            
            <td></td>
          </tr>
          <tr>
            <td>csp_client_incoming_credentials</td>
            
            <td>CSP client incoming credentials<br><br>List of incoming client IDs</td>
            
            <td>array of string</td>
            
            <td></td>
          </tr>
          <tr>
            <td>csp_logout_uri</td>
            
            <td>CSP endpoint that returns the identity provider's logout url<br><br>This CSP end-point returns the identity provider's logout url. In order to logout, an explicit redirect to this url is needed.</td>
            
            <td>string</td>
            
            <td></td>
          </tr>
          <tr>
            <td>csp_org_uri</td>
            
            <td>Relative path to CSP Org<br><br>Relative path on CSP server to the Org location. Can be "/csp/gateway/am/api/orgs/".</td>
            
            <td>string</td>
            
            <td></td>
          </tr>
          <tr>
            <td>csp_public_key_uri</td>
            
            <td>CSP endpoint to get the list of public keys in JWKS format<br><br>CSP endpoint that returns a list of public keys in jwks format. These keys are used in an application to validate that the access-token is valid.</td>
            
            <td>string</td>
            
            <td></td>
          </tr>
          <tr>
            <td>csp_time_drift</td>
            
            <td>CSP time drift<br><br>CSP time drift in milliseconds</td>
            
            <td>integer</td>
            
            <td></td>
          </tr>
          <tr>
            <td>csp_user_authorization_uri</td>
            
            <td>CSP Discovery login entry point for OAuth 2.0 authorization<br><br>This endpoint is used with browser redirection only. It discovers the user's Identity Provider (IdP) and sends the user to the IdP login page. It is the starting point of the OAuth 2.0 flow to authenticate end users from an application.</td>
            
            <td>string</td>
            
            <td></td>
          </tr>
          <tr>
            <td>csp_user_info_uri</td>
            
            <td>CSP user info endpoint<br><br>This endpoint returns the content of the given access token if the token is valid. It also includes the group_ids and group_names if the client is registered with group_id, group_names scopes. It's usually /am/api/userinfo.</td>
            
            <td>string</td>
            
            <td></td>
          </tr>
          <tr>
            <td>default_org_id</td>
            
            <td>Org ID of a Client<br><br>Org ID of a Client - commonly UUID.</td>
            
            <td>string</td>
            
            <td></td>
          </tr>
          <tr>
            <td>ea_org</td>
            
            <td>Org Info for "Site Reliability Engineer"<br><br>Org ID and role of "Site Reliability Engineer"</td>
            
            <td><a href="types_OrgInfo.html">OrgInfo</a></td>
            
            <td></td>
          </tr>
          <tr>
            <td>gss_org</td>
            
            <td>Org Info for "Global Support Services"<br><br>Org ID and role of "Global Support Services"</td>
            
            <td><a href="types_OrgInfo.html">OrgInfo</a></td>
            
            <td></td>
          </tr>
          <tr>
            <td>mode_change_only</td>
            
            <td>Only change node  mode<br><br>When this parameter is set to true, only a change of the node mode happens without any update to the auth properties. When this param is not set to true i.e. set to false or not provided, mode change and update to the auth properties will both happen.</td>
            
            <td>boolean</td>
            
            <td></td>
          </tr>
          <tr>
            <td>mode_id</td>
            
            <td>Nsx node mode<br><br>Possible enum values in a "/config/nsx_appliance_mode" file</td>
            
            <td>string</td>
            
            <td><span style="color: rgb(153, 0, 0);">Required</span><br>Enum: ON_PREM, SERVICE, VMC, VMC_LOCAL</td>
          </tr>
          <tr>
            <td>proxy_host</td>
            
            <td>IP/host of PoP (Point-of-Presence) HTTP proxy server</td>
            
            <td><a href="types_HostnameOrIPAddress.html">HostnameOrIPAddress</a></td>
            
            <td></td>
          </tr>
          <tr>
            <td>proxy_port</td>
            
            <td>Port of PoP (Point-of-Presence) Http proxy server</td>
            
            <td>integer</td>
            
            <td>Minimum: 1<br>Maximum: 65535</td>
          </tr>
          <tr>
            <td>public_client_info</td>
            
            <td>OAuth2 info for public clients<br><br>OAuth2 info for public clients</td>
            
            <td><a href="types_PublicClientInfo.html">PublicClientInfo</a></td>
            
            <td></td>
          </tr>
          <tr>
            <td>resource_type</td>
            
            <td>Node Mode type</td>
            
            <td>string</td>
            
            <td>Enum: SwitchingToVmcModeParameters<br>Default: "SwitchingToVmcModeParameters"</td>
          </tr>
          <tr>
            <td>sddc_id</td>
            
            <td>SDDC id<br><br>SDDC id</td>
            
            <td>string</td>
            
            <td></td>
          </tr>
          <tr>
            <td>service_definition_id</td>
            
            <td>Service definition id<br><br>Service definition id</td>
            
            <td>string</td>
            
            <td></td>
          </tr>
          <tr>
            <td>sre_org</td>
            
            <td>Org Info for "Enterprise Admin"<br><br>Org ID and role of "Enterprise Admin"</td>
            
            <td><a href="types_OrgInfo.html">OrgInfo</a></td>
            
            <td></td>
          </tr>
      </tbody>
    </table>

    </div>

            <div style="clear:both"></div>
           </div>
           <br>
            <h4>Example Request:</h4>
            <span class="example_request">POST https://&lt;nsx-mgr&gt;/api/v1/configs/node/mode
{
  "mode_id": "VMC",
  "base_url": "https://console-stg.cloud.vmware.com",
  "csp_org_uri": "/csp/gateway/am/api/orgs",
  "auth_code": {
    "client_id": "some ID",
    "client_secret": "some secret"
  },
  "csp_client_credential": {
    "client_id": "some ID2",
    "client_secret": "some secret2"
  },
  "proxy_host": "127.0.0.1",
  "proxy_port": 8080,
  "default_org_id": "d56c8ab2-7aee-4e6e-8c68-6b99db496766",
  "ea_org": {
    "org_id": "nsxaas-enterprise",
    "org_role": "enterprise_admin"
  },
  "gss_org": {
    "org_id": "nsxaas-gss",
    "org_role": "auditor"
  },
  "sre_org": {
    "org_id": "nsxaas-sre",
    "org_role": "site_reliability_engineer"
  },
  "sddc_id": "cd48ab2-7aee-4e6e-8c68-6b99db496766",
  "csp_client_incoming_credentials": [
    "85ac8ab2-7aee-4e6e-8c68-6b99db496766",
    "6d3c8ab2-7aee-4e6e-8c68-6b99db496766",
    ...
  ],
  "service_definition_id": "ab481ab2-7aee-4e6e-8c68-6b99db496766",
  "csp_time_drift": 5000,
  "basic_auth_whitelist_ips": [
    "10.0.1.2",
    "10.0.1.3",
    ...
  ],
  "public_client_info": {
    "client_id": "test-client_id",
    "base_url": "https://console-stg.cloud.vmware.com",
    "redirect_uris": [
      "https://redirect.org/gateway",
      "https://cs-staging.org/am/csp/gateway"
    ],
    "default_org_id": "d5916524-fd57-49fe-927e-7f3671e52f87",
    "ea_org_id": "nsx-admin",
    "sre_org_id": "nsx-sre",
    "gss_org_id": "nsx-gss"
  },
  "csp_user_info_uri": "/csp/gateway/am/api/loggedin/user",
  "csp_public_key_uri": "/csp/gateway/am/api/auth/token-public-key?format=jwks",
  "csp_access_token_uri": "/csp/gateway/am/api/auth/authorize",
  "csp_user_authorization_uri": "/csp/gateway/discovery",
  "csp_logout_uri": "/csp/gateway/am/api/auth/logout"
}</span>

          <h3>Successful Response:</h3>
          
            <div class="subsection">
              <div class="row">
                <div class="label">Response Code:</div>
                <div class="value">200 OK</div>
              </div>
              <div class="row">
                <div class="label">Response Headers:</div>
                  
                  <div class="value">Content-type: application/json</div>
                </div>
                
                  
  
  <div class="row">
    <div class="label">Response Body:</div>
    <div class="value">NodeMode<span class="inline_table_toggle" onclick="toggleInlineTable(this, 'ChangeNodeMode', 'NodeMode.ChangeNodeMode.Response_Body')">+</span></div>
  </div>
    <div id="NodeMode.ChangeNodeMode.Response_Body" style="display:none" class="inline_table_div">
      <h4>
      <a href="types_NodeMode.html">
        <span>NodeMode</span>
      </a> (<a href="schemas_NodeMode.html">schema</a>)
      </h4>
      
    
    <table border="1">
      <tbody>
        <tr class="header">
          <th>Name</th>
          <th width="60%">Description</th>
          <th>Type</th>
          <th>Notes</th>
        </tr>
          <tr>
            <td>mode_id</td>
            
            <td>Nsx node mode<br><br>Possible enum values in a "/config/nsx_appliance_mode" file</td>
            
            <td>string</td>
            
            <td><span style="color: rgb(153, 0, 0);">Required</span><br>Enum: ON_PREM, SERVICE, VMC, VMC_LOCAL</td>
          </tr>
      </tbody>
    </table>

    </div>

              <div style="clear:both"></div>
            </div>
            <br>

            <h4>Example Response:</h4>
            <span class="example_response">{
  "mode_id": "VMC"
}</span>

            <h3>Required Permissions:</h3>
            <span class="required_permissions">crud</span>

            <h3>Feature:</h3>
            <span class="rbac_feature">system_administration</span>

            <h3>Additional Errors:</h3>
            <ul>
                <li><a href="errors_301.html">301 Moved Permanently</a></li>
                <li><a href="errors_307.html">307 Temporary Redirect</a></li>
                <li><a href="errors_400.html">400 Bad Request</a></li>
                <li><a href="errors_403.html">403 Forbidden</a></li>
                <li><a href="errors_409.html">409 Conflict</a></li>
                <li><a href="errors_412.html">412 Precondition Failed</a></li>
                <li><a href="errors_500.html">500 Internal Server Error</a></li>
                <li><a href="errors_503.html">503 Service Unavailable</a></li>
            </ul>


        </div>
    </BODY>
</HTML>
